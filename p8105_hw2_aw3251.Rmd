---
title: "Homework 2"
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```

## Problem 1 

Read the Mr. Trashweheel dataset. 

```{r}
trashwheel_df = 
  read_xlsx(
    "./data/Trashwheel.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  ) 
```

Read precipitation data for 2018 and 2017!

```{r}
precip_2018 = 
  read_excel(
    "./data/Trashwheel.xlsx",
    sheet = "2018 Precipitation",
    skip = 1,
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./data/Trashwheel.xlsx",
    sheet = "2017 Precipitation",
    skip = 1,
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation. 

```{r}
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017) 

left_join(precip_df, month_df, by = "month")
```


This dataset contains information from the Mr. Trashwheel Trash Collector in Baltimore, MD. As trash enters the inner harbor, the trashwheel collects that trash and stores it in a dumpster. The dataset contains information on year, month, and trash collected, including some specific kinds of trash. There are a total of `r nrow(trashwheel_df)` rows in our final dataset. Additional data sheets include monthly precipitation data. 


## Problem 2

Read the NYC Transit dataset. 

```{r}
transit_df = 
  read_csv(
    "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE")) %>% 
  mutate(entry = as.logical(entry))

```

This dataset contains information on each entry and exit to and from the NYC Transit subway system. I have narrowed the dataset to only include the variables `r names(transit_df)`. The dataset now includes `r nrow(transit_df)` rows and `r ncol(transit_df)`. I have cleaned the names to snake case and have changed the variable 'entry' from a character vector to a logical vector. These data are not yet tidy, since the route1-route11 column names contain information that should be listed in rows. 

Answer questions about the dataset. 

```{r}
distinct(transit_df, line, station_name)

filter(transit_df, ada == TRUE) %>% 
  distinct(line, station_name) %>% 
  count()


count(transit_df, vending == 'NO')
```

There are `r count(distinct(transit_df, line, station_name))` distinct stations. `r filter(transit_df, ada == TRUE) %>% distinct(line, station_name) %>% count()` stations are ADA compliant. 

```{r}
transit_df %>% 
  mutate_at(vars(route1:route11), replace_na, 'None') 
```


## Problem 3

Cleaning the data in pols-month.csv. 

```{r}
pols_df = 
  read_csv("./data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(year = as.integer(year)) %>% 
  mutate(month = as.integer(month)) %>% 
  mutate(day = as.integer(day)) 

month_df = 
  tibble(
    month = 1:12,
    month_name = month.name) %>% 
  mutate(month = as.integer(month))
  

pols_df = 
  left_join(pols_df, month_df, by = "month")


select(pols_df, -day)
```

